<div class="container mt-5 mb-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card p-4 shadow-lg rounded">
                <h2 class="text-center text-success">Quên mật khẩu</h2>

                <form action="/LoginUser/ForgotPassword" method="post" id="forgotPasswordForm" class="mt-4">
                    <div class="form-group mb-3">
                        <label for="email" class="form-label text-black">Nhập tài khoản hoặc email:</label>
                        <input type="text" id="email" name="email" class="form-control rounded-sm" required
                               pattern="[a-zA-Z0-9._%+-]+[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}" title="Vui lòng nhập địa chỉ email hợp lệ" />
                    </div>
                    <div class="d-grid gap-2">
                        <button type="submit" id="submitButton" class="btn btn-outline-success btn-block rounded-sm">Gửi yêu cầu</button>
                    </div>
                    <!-- Bootstrap 5 Spinner -->
                    <div id="loadingSpinner" style="display: none; text-align: center; margin-top: 20px;">
                        <div class="spinner-border text-success" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </form>

                @if (ViewBag.ErrorMessage != null)
                {
                    <div class="alert alert-danger mt-4 text-center rounded-sm">
                        @ViewBag.ErrorMessage
                    </div>
                }
                @if (ViewBag.SuccessMessage != null)
                {
                    <div class="alert alert-success mt-4 text-center rounded-sm">
                        @ViewBag.SuccessMessage
                    </div>
                }
            </div>
        </div>
    </div>
</div>
<script>
    // Lắng nghe sự kiện submit form
    document.getElementById("forgotPasswordForm").addEventListener("submit", function (event) {
        // Hiển thị spinner khi gửi form
        document.getElementById("submitButton").disabled = true; // Vô hiệu hóa nút gửi
        document.getElementById("loadingSpinner").style.display = "block"; // Hiển thị spinner

        // Nếu bạn sử dụng AJAX để gửi form, bạn có thể xử lý gửi form ở đây mà không làm mới trang.
        // Nếu sử dụng cách submit mặc định, sẽ tự động gửi và xử lý tại server
        // Đảm bảo biểu tượng loading vẫn hiển thị trong suốt quá trình gửi.

        // Giả lập quá trình gửi email với setTimeout (trong thực tế bạn có thể gửi form với AJAX)
        setTimeout(function () {
            // Sau khi nhận được phản hồi từ server, ẩn biểu tượng loading
            document.getElementById("loadingSpinner").style.display = "none";
            document.getElementById("submitButton").disabled = false; // Bật lại nút gửi
        }, 3000); // 3000ms = 3s (Giả lập quá trình gửi)
    });
</script>

